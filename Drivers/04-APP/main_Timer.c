/*
 * main_Timer.c
 *
 *  Created on: Feb 26, 2023
 *      Author: oh377
 */

/**********************************************************************************************************************
 *  FILE DESCRIPTION
 *  -----------------------------------------------------------------------------------------------------------------*/
/*/****************************************************************/
/*   Author             :    Omar Hassan	 				    */
/*	 Date 				:    26 Feb 2023 						*/
/*	 Version 			:    1.0V 							 	*/
/*	 Description 		:   Application file for timer 			*/
/*							 									*/
/****************************************************************/
 /*
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/

#include "std_types.h"
#include "bit_math.h"

#include "dio.h"
#include "led.h"

#include <util/delay.h>
#include "EXTI_int.h"
#include "TIMERS_int.h"

/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

u8 counter = 0;

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/****************************************************************/
/* Description   : is used to toggle led on and off and is called */
/*                 in the Timer/Counter0 compare match and,      */
/* 					overflow Interrupts							*/
/****************************************************************/

void IS_voidLedOn(void);

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/



/****************************************************************/
/* Description   : Guard to protect this File from include more */
/*                 than one time .                              */
/****************************************************************/

int main(void)
{
	led_init();

	dio_vidConfigChannel(TIMER0_PWM_PORT, TIMER0_PWM_PIN, OUTPUT);
//	led_on(LED_RED);
//	TIMER0_void_SetOVCallBack(IS_voidLedOn);
//	TIMER0_void_SetCTCCallBack(IS_voidLedOn);

	TIMER0_void_Init();
//	TIMER0_void_EnableOVInt();
//	TIMER0_void_EnableCTCInt();

//	TIMER0_void_SetTimerReg(200);

//	TIMER0_void_SetCompareVal(50);
//	EXT_voidEnableGlobalInt();

	while(1)
	{
		for(u8 i = 0; i < 255; i++)
		{
			TIMER0_void_SetCompareVal(i);
			_delay_ms(5);
		}
		for(u8 i = 255; i >= 0; i--)
		{
			TIMER0_void_SetCompareVal(i);
			_delay_ms(5);
		}
	}
	return 0;
}


/*  */
void IS_voidLedOn(void)
{
//	led_on(LED_RED);
	counter++;

	if(counter == 40)
	{
		led_toggle(LED_BLUE);
		counter = 0;
	}

}


/**********************************************************************************************************************
 *  END OF FILE: FileName.c
 *********************************************************************************************************************/
